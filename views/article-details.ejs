<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="/style.css" />
        <link rel="shortcut icon" type="image/x-icon" href="/img/favicon.ico" />
        <title>Document</title>
    </head>
    <body>
        <header>
            <div class="logo-container">
                <a href="/"
                    ><img class="logo-img" src="/img/project-logo.png" alt=""
                /></a>
                <h4 class="logo-text">Articles</h4>
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="/" class="nav-link">Home</a></li>
                    <li><a href="/Articles" class="nav-link">Articles</a></li>
                    <li><a href="/Create" class="nav-link">Create</a></li>
                    <li><a href="/#About-Us" class="nav-link">About Us</a></li>
                </ul>
            </nav>
        </header>
        <section class="content-wrapper">
            <h1><%= article.title %></h1>
            <h2 class="genre-detail"><%= article.genre %></h2>
            <h2 class="author-detail">By <%= article.name %></h2>
            <p><%= article.body %></p>
            <a href="/Articles/<%= article._id %>"></a>
            <a class="delete" data-art="<%= article._id %>">
                <img src="/img/delete-icon.svg" alt="delete-icon" />
            </a>
        </section>
        <footer>
            <div class="footer-container">
                <div class="social-media-icons">
                    <a class="icon-link" href="#"
                        ><img
                            class="icon-img"
                            src="/img/linkedin-icon.png"
                            alt="linkedin"
                    /></a>
                    <a class="icon-link" href="#"
                        ><img
                            class="icon-img"
                            src="/img/github-icon.png"
                            alt="linkedin"
                    /></a>
                    <a class="icon-link" href="#"
                        ><img
                            class="icon-img"
                            src="/img/discord-icon.png"
                            alt="linkedin"
                    /></a>
                </div>
                <div class="footer-text">
                    <h2>Made by Viresh Gupta</h2>
                    <p>Copyrights Reserved 2022</p>
                </div>
            </div>
        </footer>
        <script>
            const deleteIcon = document.querySelector("a.delete")
            deleteIcon.addEventListener("click", (e) => {
                console.log("Clicked")
                const endpoint = `/Articles/${deleteIcon.dataset.art}`
                console.log(endpoint)
                fetch(endpoint, {
                    method: "DELETE",
                })
                    .then((response) => response.json())
                    .then((data) => (window.location.href = data.redirect))
                    .catch((error) => console.log(error))
            })
        </script>
    </body>
</html>
